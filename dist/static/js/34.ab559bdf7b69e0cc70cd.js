webpackJsonp([34],{BO1k:function(t,e,s){t.exports={default:s("fxRn"),__esModule:!0}},"H+kO":function(t,e,s){"use strict";var r=s("BO1k"),i=s.n(r);e.a={data:function(){return{categoryList:[],gbgoodsId:"",secondCategoryList:[],isUserEnter:!1,isOftenBuy:!1}},methods:{addActiveStatus:function(t){var e=1;e=this.isUserEnter?0:1;for(var s in t)t[s].isActive=s==e;return t},menuClick:function(t){this.pageNum=1,this.productList=[],this.$refs.productList&&this.$refs.productList.$emit("ydui.infinitescroll.reInit"),t.isActive||(t.isActive=!0);var e=!0,s=!1,r=void 0;try{for(var a,o=i()(this.categoryList);!(e=(a=o.next()).done);e=!0){var n=a.value;t.id!=n.id&&(n.isActive=!1)}}catch(t){s=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(s)throw r}}if("oftenbuy"==t.id)this.secondCategoryList=[],this.isOftenBuy=!0,this.gbgoodsId="",this.getProductList();else if(this.isOftenBuy=!1,t.childList){this.secondCategoryList=t.childList;for(var d in this.secondCategoryList)0!=d&&this.secondCategoryList[d].isActive&&(this.secondCategoryList[d].isActive=!1);this.gbgoodsId=t.gbgoodsId,this.getProductList()}else this.secondCategoryList=[],this.gbgoodsId=t.gbgoodsId,this.getProductList()},getCategoryList:function(){this.getCategoryListSaveLocal()},getCategoryListSaveLocal:function(){var t=this;this.postRequest("category/childList",{parentCategoryId:"top",filteEnabled:1,filteDeleted:0,orderField:"t.f_id",supplierId:this.sellerId}).then(function(e){e&&e.data&&0==e.data.state&&(e.data.aaData.unshift({name:"常买",id:"oftenbuy"}),t.categoryList=t.addActiveStatus(e.data.aaData),t.getSonCategoryList(t.categoryList))})},getSonCategoryList:function(t){for(var e in t)if(t[e].childList)for(var s in t[e].childList)t[e].childList[s].isActive=!1;this.isOftenBuy?this.getProductList():t.length>1&&t[1].childList?(this.secondCategoryList=t[1].childList,this.gbgoodsId=t[1].gbgoodsId,this.getProductList()):(this.secondCategoryList=[],t.length>1&&(this.gbgoodsId=t[1].gbgoodsId,this.getProductList()))}}}},Lp7M:function(t,e,s){"use strict";s.d(e,"a",function(){return r}),s.d(e,"b",function(){return i});var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("yd-layout",[s("yd-scrolltab",[s("div",{attrs:{id:"UserNewAddress"}},[s("yd-cell-group",[s("yd-cell-item",{attrs:{arrow:""}},[s("span",{attrs:{slot:"left"},slot:"left"},[s("div",{staticClass:"lable"},[s("strong",[t._v("行政区")])])]),t._v(" "),t.form.provinceName||t.form.cityName||t.form.districName?s("div",{staticClass:"select_addr",attrs:{slot:"right"},on:{click:function(e){t.selectAddr(t.form)}},slot:"right"},[t._v(t._s(t.form.provinceName+"/"+t.form.cityName+"/"+t.form.districName))]):s("div",{staticClass:"select_addr",attrs:{slot:"right"},on:{click:function(e){t.selectAddr(t.form)}},slot:"right"},[t._v("请优先选择您的区域地址")])]),t._v(" "),t.form.provinceName||t.form.cityName||t.form.districName?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[s("div",{staticClass:"lable"},[s("strong",[t._v("联系人")])])]),t._v(" "),s("yd-input",{attrs:{slot:"right",max:"20",placeholder:"请输入联系人","show-success-icon":!1},slot:"right",model:{value:t.form.contacts,callback:function(e){t.$set(t.form,"contacts",e)},expression:"form.contacts"}})],1):t._e(),t._v(" "),t.form.provinceName||t.form.cityName||t.form.districName?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[s("div",{staticClass:"lable"},[s("strong",[t._v("电话")])])]),t._v(" "),s("yd-input",{attrs:{slot:"right",type:"number",regex:"mobile",max:"20",placeholder:"请输入手机号码","show-success-icon":!1},slot:"right",model:{value:t.form.phoneNumber,callback:function(e){t.$set(t.form,"phoneNumber",t._n(e))},expression:"form.phoneNumber"}})],1):t._e(),t._v(" "),t.form.provinceName||t.form.cityName||t.form.districName?s("yd-cell-item",[s("span",{attrs:{slot:"left"},slot:"left"},[s("div",{staticClass:"lable"},[s("strong",[t._v("详细地址")])])]),t._v(" "),s("yd-input",{attrs:{slot:"right",max:"20",placeholder:"例：XX街道XX号","show-success-icon":!1},slot:"right",model:{value:t.form.detailedAddress,callback:function(e){t.$set(t.form,"detailedAddress",e)},expression:"form.detailedAddress"}})],1):t._e(),t._v(" "),t.form.provinceName||t.form.cityName||t.form.districName?s("yd-cell-item",{staticClass:"textarea"},[s("span",{attrs:{slot:"left"},slot:"left"},[s("div",{staticClass:"lable"},[s("strong",[t._v("完整信息")])])]),t._v(" "),s("yd-textarea",{attrs:{slot:"right",readonly:"",placeholder:"完整信息",maxlength:"100"},slot:"right",model:{value:t.form.completeAddress,callback:function(e){t.$set(t.form,"completeAddress",e)},expression:"form.completeAddress"}})],1):t._e(),t._v(" "),t.form.provinceName||t.form.cityName||t.form.districName?s("yd-cell-item",{staticClass:"textarea"},[s("span",{attrs:{slot:"left"},slot:"left"},[s("div",{staticClass:"lable"},[s("strong",[t._v("备注")])])]),t._v(" "),s("yd-textarea",{attrs:{slot:"right",placeholder:"请输入备注信息",maxlength:"100","show-success-icon":!1},slot:"right",model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1):t._e()],1)],1)]),t._v(" "),s("yd-button",{staticStyle:{padding:"0 0.24rem",position:"absolute",bottom:"0",width:"100%"},attrs:{size:"large",bgcolor:"#6FB138",color:"#fff"},nativeOn:{click:function(e){return t.save(e)}}},[t._v("保存")])],1)},i=[]},REvB:function(t,e,s){"use strict";function r(t){s("s7OO")}Object.defineProperty(e,"__esModule",{value:!0});var i=s("Witg"),a=s("Lp7M"),o=s("XyMi"),n=r,d=Object(o.a)(i.a,a.a,a.b,!1,n,null,null);e.default=d.exports},Vxc4:function(t,e,s){e=t.exports=s("FZ+f")(!0),e.push([t.i,"#UserNewAddress{height:100%;overflow:auto}#UserNewAddress .yd-scrolltab-content{padding:0}#UserNewAddress .yd-scrolltab{top:0;bottom:1rem}#UserNewAddress textarea{font-family:PingFang-SC-Medium}#UserNewAddress .textarea .yd-cell-left{-webkit-box-align:start;-moz-align-items:start;-webkit-align-items:start;align-items:start;padding:.2rem 0}#UserNewAddress select{color:#333;padding-left:5px;font-family:PingFang-SC-Medium}#UserNewAddress .lable{width:1.8rem;font-size:.3rem}#UserNewAddress .yd-cell-right.yd-cell-arrow{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}#UserNewAddress .yd-cell-right.yd-cell-arrow:after{position:absolute;right:.3rem}#UserNewAddress .select_addr{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}#UserNewAddress::-webkit-scrollbar{display:none}","",{version:3,sources:["D:/Web/银川电子结算new/北环/前端/微信商城/src/views/user/UserNewAddress.vue"],names:[],mappings:"AACA,gBACE,YAAa,AACb,aAAe,CAChB,AACD,sCACI,SAAiB,CACpB,AACD,8BACI,MAAU,AACV,WAAa,CAChB,AACD,yBACI,8BAAkC,CACrC,AACD,wCACI,wBAAyB,AACzB,uBAAwB,AACxB,0BAA2B,AAC3B,kBAAmB,AACnB,eAAiB,CACpB,AACD,uBACI,WAAY,AACZ,iBAAkB,AAClB,8BAAkC,CACrC,AACD,uBACI,aAAc,AACd,eAAkB,CACrB,AACD,6CACI,uBAAwB,AACxB,mCAAoC,AAC5B,0BAA4B,CACvC,AACD,mDACM,kBAAmB,AACnB,WAAa,CAClB,AACD,6BACI,WAAY,AACZ,YAAa,AACb,oBAAqB,AACrB,qBAAsB,AACtB,aAAc,AACd,yBAA0B,AAC1B,2BAA4B,AACpB,kBAAoB,CAC/B,AACD,mCACE,YAAc,CACf",file:"UserNewAddress.vue",sourcesContent:["\n#UserNewAddress {\n  height: 100%;\n  overflow: auto;\n}\n#UserNewAddress .yd-scrolltab-content {\n    padding: 0 0 0 0;\n}\n#UserNewAddress .yd-scrolltab {\n    top: 0rem;\n    bottom: 1rem;\n}\n#UserNewAddress textarea {\n    font-family: 'PingFang-SC-Medium';\n}\n#UserNewAddress .textarea .yd-cell-left {\n    -webkit-box-align: start;\n    -moz-align-items: start;\n    -webkit-align-items: start;\n    align-items: start;\n    padding: .2rem 0;\n}\n#UserNewAddress select {\n    color: #333;\n    padding-left: 5px;\n    font-family: 'PingFang-SC-Medium';\n}\n#UserNewAddress .lable {\n    width: 1.8rem;\n    font-size: 0.3rem;\n}\n#UserNewAddress .yd-cell-right.yd-cell-arrow {\n    -webkit-box-pack: start;\n    -webkit-justify-content: flex-start;\n            justify-content: flex-start;\n}\n#UserNewAddress .yd-cell-right.yd-cell-arrow:after {\n      position: absolute;\n      right: .3rem;\n}\n#UserNewAddress .select_addr {\n    width: 100%;\n    height: 100%;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n}\n#UserNewAddress::-webkit-scrollbar {\n  display: none;\n}\n"],sourceRoot:""}])},Witg:function(t,e,s){"use strict";var r=s("vsZy");e.a={mixins:[r.a],data:function(){return{type:"add",form:{id:"",districName:"",detailedAddress:"",completeAddress:"",contacts:"",phoneNumber:"",customerId:"",longitude:"",latitude:"",provinceCode:"",cityCode:"",districCode:"",comment:"",getAddr:{}},ProvinceList:[],CityList:[],DistricList:[],routerHistoryNum:-2}},watch:{"form.detailedAddress":function(t,e){this.form.completeAddress=this.form.provinceName+this.form.cityName+this.form.districName+t}},created:function(){var t=this;this.$route.query.routerHistoryNum&&(this.routerHistoryNum=this.$route.query.routerHistoryNum),this.$store.dispatch("changeNavBarTitle",""),sessionStorage.getItem("getAddr")&&(this.getAddr=JSON.parse(sessionStorage.getItem("getAddr")),sessionStorage.setItem("getAddr","")),this.init(),this.postRequest("address/queryByCustomerId",{customerId:this.userInfo.typeCode}).then(function(e){e.data.aaData&&(t.type="edit"),"add"==t.type?t.$store.dispatch("changeNavBarTitle","新增地址"):(t.$store.dispatch("changeNavBarTitle","编辑地址"),t.form=e.data.aaData,t.getCityList(),t.getDistricList()),t.getAddr&&(t.form.longitude=t.getAddr.location.lng,t.form.latitude=t.getAddr.location.lat,t.form.provinceName=t.getAddr.pname,t.form.provinceCode=t.getAddr.pcode,t.form.cityName=t.getAddr.cityname,t.form.cityCode=t.getAddr.pcode,t.form.districName=t.getAddr.adname,t.form.districCode=t.getAddr.adcode,t.form.detailedAddress=t.getAddr.address+t.getAddr.name,t.form.completeAddress=t.getAddr.pname+"/"+t.getAddr.cityname+"/"+t.getAddr.adname+"，",t.getAddr.name,t.getAddr.address)})},mounted:function(){},methods:{selectAddr:function(t){var e=this;t.provinceName||t.cityName||t.districName?this.$dialog.confirm({title:"提示：",mes:"离开此页面，系统可能不会保存你做的修改。",opts:function(){e.$router.push({name:"selectAddr"})}}):this.$router.push({name:"selectAddr"})},init:function(){this.getProvinceList()},getProvinceList:function(){var t=this;this.postRequest("comArea/list",{level:1}).then(function(e){e.data&&0==e.data.state&&(t.ProvinceList=e.data.aaData)})},changeProvinceList:function(){this.form.cityCode="",this.form.districCode="",this.getCityList()},getCityList:function(){var t=this;this.postRequest("comArea/list",{parentAreaCode:this.form.provinceCode,level:2}).then(function(e){e.data&&0==e.data.state&&(t.CityList=e.data.aaData)})},changeCityList:function(){this.form.districCode="",this.getDistricList()},getDistricList:function(){var t=this;this.postRequest("comArea/list",{parentAreaCode:this.form.cityCode,level:3}).then(function(e){e.data&&0==e.data.state&&(t.DistricList=e.data.aaData)})},save:function(){var t=this,e="address/create",s=/^[1][3,4,5,7,8,9][0-9]{9}$/,r={id:this.form.id,provinceCode:this.form.provinceCode,cityCode:this.form.cityCode,districCode:this.form.districCode,detailedAddress:this.form.detailedAddress,contacts:this.form.contacts,phoneNumber:this.form.phoneNumber,customerId:this.form.customerId,comment:this.form.comment,latitude:this.form.latitude,longitude:this.form.longitude};return""==r.provinceCode?void this.$dialog.alert({mes:"请选择行政区"}):""==r.cityCode?void this.$dialog.alert({mes:"请选择行政区"}):""==r.districCode?void this.$dialog.alert({mes:"请选择行政区"}):""==r.contacts?void this.$dialog.alert({mes:"请填写联系人"}):""==r.phoneNumber?void this.$dialog.alert({mes:"请填写手机号码"}):s.test(r.phoneNumber)?""==r.detailedAddress?void this.$dialog.alert({mes:"请填写详细地址"}):("edit"==this.type?e="address/update":r.customerId=this.userInfo.typeCode,void this.postRequest("comArea/list",{parentAreaCode:r.provinceCode,level:2}).then(function(s){if(s.data&&0==s.data.state){for(var i=0;i<s.data.aaData.length;i++)if(s.data.aaData[i].areaName==t.form.cityName){r.cityCode=s.data.aaData[i].areaCode;break}t.postRequest(e,r).then(function(e){e.data&&0==e.data.state&&t.$dialog.toast({mes:"保存成功",timeout:1200,icon:"success",callback:function(){this.$router.replace({name:"UserAddress",query:{routerHistoryNum:this.routerHistoryNum}})}.bind(t)})})}})):void this.$dialog.alert({mes:"请输入正确的手机号码！"})}}}},fYxN:function(t,e,s){"use strict";var r=s("BO1k"),i=s.n(r);e.a={data:function(){return{carIds:[],ShippingcarList:[],alreadyChosenGoods:[],orderTotal:0,shopCar:{shopNum:0,commodityNum:0,shopAllMoney:"0.00"},queryGrouplist:[]}},methods:{createShippingcar:function(t){var e,s=this,r={buyerId:this.userInfo.typeCode,productId:t.productId,productName:t.productName,skuId:t.id,skuName:t.name,quantity:t.quantity,comment:t.remark||"",sellerId:this.sellerId||this.$route.query.sellerId||t.sellerId};t.supplierId&&(r.sellerId=t.supplierId),t.skuId&&(r.skuId=t.skuId),t.skuName&&(r.skuName=t.skuName);var a=[],o=!0,n=!1,d=void 0;try{for(var c,l=i()(this.carIds);!(o=(c=l.next()).done);o=!0){var u=c.value;a.push(u.skuId)}}catch(t){n=!0,d=t}finally{try{!o&&l.return&&l.return()}finally{if(n)throw d}}if(this.isInArray(a,r.skuId)){e=0==t.quantity?"shippingcar/delete":"shippingcar/update";for(var m in this.carIds)this.carIds[m].skuId!=t.id&&this.carIds[m].skuId!=t.skuId||(r.id=this.carIds[m].carId);this.postRequest(e,r).then(function(t){t.data&&0==t.data.state&&s.getShippingcarList()})}else e="shippingcar/create",this.postRequest(e,r).then(function(e){if(e.data&&0==e.data.state){var r={skuId:t.id||t.skuId,carId:e.data.aaData.id};s.carIds.push(r),s.getShippingcarList()}else t.showjianBtn=!1,t.quantity=0,s.$dialog.alert({mes:e.data.msg})})},getShippingcarList:function(){var t=this;this.postRequest("shippingcar/queryGrouplist",{buyerId:this.userInfo.typeCode,sellerId:this.sellerId}).then(function(e){if(e.data&&0==e.data.state){t.ShippingcarList=e.data.aaData;var s=[];t.alreadyChosenGoods=[];for(var r in e.data.aaData){if(t.sellerId==r){var a=!0,o=!1,n=void 0;try{for(var d,c=i()(e.data.aaData[r]);!(a=(d=c.next()).done);a=!0){d.value.showjianBtn=!1}}catch(t){o=!0,n=t}finally{try{!a&&c.return&&c.return()}finally{if(o)throw n}}t.alreadyChosenGoods=e.data.aaData[r]}var l=!0,u=!1,m=void 0;try{for(var h,f=i()(e.data.aaData[r]);!(l=(h=f.next()).done);l=!0){var A=h.value,p={skuId:A.skuId,carId:A.id};s.push(p)}}catch(t){u=!0,m=t}finally{try{!l&&f.return&&f.return()}finally{if(u)throw m}}}t.carIds=s;for(var g=[],y=0;y<t.alreadyChosenGoods.length;y++)for(var v=0;v<t.carSettlementGoods.length;v++)t.alreadyChosenGoods[y].id==t.carSettlementGoods[v]&&g.push(t.carSettlementGoods[v]);t.carSettlementGoods=g,t.showShopCar&&t.carSettlementGoods.length<=0&&(t.isCheckAll=!1,t.$refs.checklistDemo.$emit("ydui.checklist.checkall",t.isCheckAll)),t.orderTotal=t.getOrderTotal(t.alreadyChosenGoods).priceTotal,"ShopSearch"!=t.$route.name&&"ProSkuList"!=t.$route.name&&"UserCollection"!=t.$route.name&&"Home"!=t.$route.name||t.getSearchProCar(e.data.aaData)}})},getSearchProCar:function(t){var e=0;this.queryGrouplist=[],this.shopCar.shopMoney="0.00";for(var s in t)e++,this.queryGrouplist=this.queryGrouplist.concat(t[s]);this.shopCar.shopNum=e,this.shopCar.commodityNum=this.queryGrouplist.length;for(var r=0;r<this.queryGrouplist.length;r++){var i=parseFloat(this.queryGrouplist[r].promotionPrice)*parseFloat(this.queryGrouplist[r].quantity);this.shopCar.shopMoney=(parseFloat(this.shopCar.shopMoney)+i).toFixed(2)}this.$refs.shopCarshopMoney&&(this.$refs.shopCarshopMoney.innerHTML="￥"+this.shopCar.shopMoney)},getOrderTotal:function(t){var e=0,s=0;for(var r in t)s+=t[r].quantity,t[r].promotionPrice>0&&t[r].promotionBasePrice>0?e+=t[r].quantity*t[r].promotionPrice.mul(100):e+=t[r].quantity*t[r].price.mul(100);return{priceTotal:(e/100).toFixed(2),quantityTotal:(s-0).toFixed(2)}},isInArray:function(t,e){for(var s=0;s<t.length;s++)if(t[s]==e)return!0;return!1},countVisits:function(){this.postRequest("store/countVisits",{sellerId:this.sellerId}).then(function(t){t.data&&t.data.state})}}}},fxRn:function(t,e,s){s("+tPU"),s("zQR9"),t.exports=s("g8Ux")},g8Ux:function(t,e,s){var r=s("77Pl"),i=s("3fs2");t.exports=s("FeBl").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},s7OO:function(t,e,s){var r=s("Vxc4");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=s("rjj0").default;i("fca79556",r,!0,{})},vsZy:function(t,e,s){"use strict";var r=s("BO1k"),i=s.n(r),a=s("//Fk"),o=s.n(a),n=s("pyzf");s("fYxN"),s("H+kO");e.a={data:function(){return{uploadURL:n.a.uploadURL,cityName:n.a.cityName,imgURL:n.a.imgURL,userInfo:JSON.parse(localStorage.getItem("userInfo")),logisticsType:[{type:0,name:"自提",selected:!1},{type:1,name:"物流配送",selected:!0}],payType:[{type:0,name:"现金支付",selected:!0},{type:1,name:"POS刷卡",selected:!1},{type:2,name:"微信支付",selected:!1},{type:3,name:"支付宝支付",selected:!1}],distributionType:[{distributionType:0,name:"次日配送",selected:!0},{distributionType:1,name:"当日配送",selected:!1}]}},mounted:function(){},methods:{getServerTime:function(){var t=this;return new o.a(function(e,s){t.postRequest("store/getServerTime",{}).then(function(t){e(t&&0==t.data.state?t.data.aaData:null)})})},priceFormat:function(t){return"number"==typeof t?t.div(100)||0:t||0},blurAdjust:function(t){setTimeout(function(){if("INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName){/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)&&"android","ios"&&document.activeElement.scrollIntoViewIfNeeded(!0)}},100)},uniqueArr:function(t){var e=[],s={},r=!0,a=!1,o=void 0;try{for(var n,d=i()(t);!(r=(n=d.next()).done);r=!0){var c=n.value;s[c]||(e.push(c),s[c]=1)}}catch(t){a=!0,o=t}finally{try{!r&&d.return&&d.return()}finally{if(a)throw o}}return e},GetDateStr:function(t,e){var s=new Date;e&&(s=new Date(e.replace(/-/g,"/"))),s.setDate(s.getDate()+t);var r=s.getFullYear(),i=s.getMonth()+1,a=s.getDate(),o=s.getDay();return i<10&&(i="0"+i),a<10&&(a="0"+a),{date:r+"-"+i+"-"+a,week:"星期"+"日一二三四五六".charAt(o)}}}}}});
//# sourceMappingURL=34.ab559bdf7b69e0cc70cd.js.map